import{c as k,r as m,j as e,m as S,d as G,e as de,f as me,B as ee,g as se,T as xe,u as ae,h as he,s as R,V as D,L as J,M as B,i as ue,k as pe,l as ge,P as fe}from"./index-Df9m1I_8.js";import{C as be}from"./ContactForm-n2ecUrVm.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ve=k("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=k("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=k("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ne=k("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y=k("Map",[["polygon",{points:"3 6 9 3 15 6 21 3 21 18 15 21 9 18 3 21",key:"ok2ie8"}],["line",{x1:"9",x2:"9",y1:"3",y2:"18",key:"w34qz5"}],["line",{x1:"15",x2:"15",y1:"6",y2:"21",key:"volv9a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const we=k("Sliders",[["line",{x1:"4",x2:"4",y1:"21",y2:"14",key:"1p332r"}],["line",{x1:"4",x2:"4",y1:"10",y2:"3",key:"gb41h5"}],["line",{x1:"12",x2:"12",y1:"21",y2:"12",key:"hf2csr"}],["line",{x1:"12",x2:"12",y1:"8",y2:"3",key:"1kfi7u"}],["line",{x1:"20",x2:"20",y1:"21",y2:"16",key:"1lhrwl"}],["line",{x1:"20",x2:"20",y1:"12",y2:"3",key:"16vvfq"}],["line",{x1:"2",x2:"6",y1:"14",y2:"14",key:"1uebub"}],["line",{x1:"10",x2:"14",y1:"8",y2:"8",key:"1yglbp"}],["line",{x1:"18",x2:"22",y1:"16",y2:"16",key:"1jxqpz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=k("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]),Me=({onFilterChange:b,initialFilters:s})=>{const[o,u]=m.useState({search:"",priceMin:"",priceMax:"",bedrooms:"",bathrooms:"",propertyType:""}),[w,v]=m.useState(!1);m.useEffect(()=>{s&&(s.search||s.propertyType||s.priceMin||s.priceMax||s.bedrooms||s.bathrooms)&&u(x=>({...x,...s}))},[s]);const h=c=>{const{name:x,value:j}=c.target;u(g=>({...g,[x]:j}))},M=c=>{c.preventDefault(),b(o)},C=c=>{c.key==="Enter"&&(c.preventDefault(),b(o))},T=()=>{u({search:"",priceMin:"",priceMax:"",bedrooms:"",bathrooms:"",propertyType:""}),b({search:"",priceMin:"",priceMax:"",bedrooms:"",bathrooms:"",propertyType:""})};return e.jsxs("div",{className:"relative mb-12",children:[e.jsxs(S.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5},className:"bg-white rounded-xl shadow-lg p-6 border border-secondary-dark/20",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("h3",{className:"text-xl font-display font-semibold text-primary flex items-center",children:[e.jsx(Ne,{size:20,className:"mr-2 text-accent"}),"Encontre Seu Imóvel Ideal"]}),e.jsx("p",{className:"text-primary/70 text-sm mt-1",children:"Use os filtros para refinar sua busca"})]}),e.jsxs("button",{onClick:()=>v(!w),className:"text-sm flex items-center font-medium text-accent hover:text-accent-dark transition-colors",children:[e.jsx(we,{size:16,className:"mr-1"}),w?"Ocultar Filtros":"Mostrar Todos Filtros"]})]}),e.jsxs("form",{onSubmit:M,children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(G,{size:18,className:"text-accent"})}),e.jsx("input",{type:"text",id:"search",name:"search",value:o.search,onChange:h,onKeyDown:C,placeholder:"Buscar por localização, título ou características...",className:"w-full pl-10 py-3 pr-4 rounded-lg border border-secondary-dark/30 focus:ring-2 focus:ring-accent/30 focus:border-accent focus:outline-none transition-all font-sans","aria-label":"Pesquisar imóveis",title:"Dicas: Busque por nome de rua, bairro, cidade ou características. Pode usar múltiplas palavras."}),e.jsxs("div",{className:"absolute inset-y-0 right-10 flex items-center group",children:[e.jsx(de,{size:14,className:"text-primary/40 cursor-help"}),e.jsxs("div",{className:"absolute bottom-full right-0 mb-2 w-72 bg-white p-3 rounded-md shadow-lg text-xs text-primary/80 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:[e.jsx("p",{className:"mb-1 font-bold text-primary",children:"Dicas de busca avançada:"}),e.jsxs("ul",{className:"list-disc pl-4 space-y-1",children:[e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Busca por rua:"}),' Digite "Rua" ou "Av" seguido do nome (ex: "Rua Ipanema")']}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Palavras do anúncio:"}),' Busque por palavras que aparecem na descrição (ex: "jardim", "varanda")']}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Múltiplas palavras:"}),' Use espaços para combinar termos (ex: "Porto Alegre 3 quartos")']}),e.jsxs("li",{children:[e.jsx("span",{className:"font-medium",children:"Palavras parciais:"}),' Use parte de uma palavra (ex: "apart" para "apartamento")']})]})]})]})]}),e.jsxs("button",{type:"submit",className:"bg-accent hover:bg-accent-light text-white rounded-lg px-8 py-3 transition-all duration-300 flex items-center justify-center shadow-md hover:shadow-lg font-display font-medium",children:[e.jsx(G,{size:18,className:"mr-2"}),"Buscar"]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-secondary rounded-lg p-3 flex items-center border border-secondary-dark/10",children:[e.jsx(me,{size:18,className:"text-accent mr-2"}),e.jsxs("select",{id:"propertyType",name:"propertyType",value:o.propertyType,onChange:h,className:"w-full bg-transparent border-none focus:ring-0 text-primary py-1 font-sans text-sm",children:[e.jsx("option",{value:"",children:"Todos os tipos"}),e.jsx("option",{value:"Casa",children:"Casa"}),e.jsx("option",{value:"Apartamento",children:"Apartamento"}),e.jsx("option",{value:"Terreno",children:"Terreno"})]})]}),e.jsxs("div",{className:"bg-secondary rounded-lg p-3 flex items-center border border-secondary-dark/10",children:[e.jsx(ee,{size:18,className:"text-accent mr-2"}),e.jsxs("select",{id:"bedrooms",name:"bedrooms",value:o.bedrooms,onChange:h,className:"w-full bg-transparent border-none focus:ring-0 text-primary py-1 font-sans text-sm",children:[e.jsx("option",{value:"",children:"Quartos"}),e.jsx("option",{value:"1",children:"1 ou mais"}),e.jsx("option",{value:"2",children:"2 ou mais"}),e.jsx("option",{value:"3",children:"3 ou mais"}),e.jsx("option",{value:"4",children:"4 ou mais"})]})]}),e.jsxs("div",{className:"bg-secondary rounded-lg p-3 flex items-center border border-secondary-dark/10",children:[e.jsx(se,{size:18,className:"text-accent mr-2"}),e.jsxs("select",{id:"bathrooms",name:"bathrooms",value:o.bathrooms,onChange:h,className:"w-full bg-transparent border-none focus:ring-0 text-primary py-1 font-sans text-sm",children:[e.jsx("option",{value:"",children:"Banheiros"}),e.jsx("option",{value:"1",children:"1 ou mais"}),e.jsx("option",{value:"2",children:"2 ou mais"}),e.jsx("option",{value:"3",children:"3 ou mais"}),e.jsx("option",{value:"4",children:"4 ou mais"})]})]}),e.jsxs("div",{className:"bg-secondary rounded-lg p-3 flex items-center border border-secondary-dark/10",children:[e.jsx(xe,{size:18,className:"text-accent mr-2"}),e.jsxs("select",{id:"priceRange",name:"priceRange",onChange:c=>{const x=c.target.value;if(x){const[j,g]=x.split("-");u(L=>({...L,priceMin:j,priceMax:g||""}))}else u(j=>({...j,priceMin:"",priceMax:""}))},value:o.priceMin&&o.priceMax?`${o.priceMin}-${o.priceMax}`:o.priceMin?`${o.priceMin}-`:"",className:"w-full bg-transparent border-none focus:ring-0 text-primary py-1 font-sans text-sm",children:[e.jsx("option",{value:"",children:"Faixa de preço"}),e.jsx("option",{value:"0-500000",children:"Até R$ 500.000"}),e.jsx("option",{value:"500000-1000000",children:"R$ 500.000 - R$ 1.000.000"}),e.jsx("option",{value:"1000000-2000000",children:"R$ 1.000.000 - R$ 2.000.000"}),e.jsx("option",{value:"2000000-",children:"Acima de R$ 2.000.000"})]})]})]}),w&&e.jsxs(S.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},transition:{duration:.3},className:"border-t border-secondary-dark/10 pt-6 mt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priceMin",className:"block text-sm font-medium text-primary/80 mb-2",children:"Preço Mínimo"}),e.jsx("input",{type:"number",id:"priceMin",name:"priceMin",value:o.priceMin,onChange:h,placeholder:"Ex: 500000",min:"0",step:"1000",className:"w-full p-3 border border-secondary-dark/30 rounded-lg focus:ring-2 focus:ring-accent/30 focus:border-accent focus:outline-none transition-all font-sans text-sm"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"priceMax",className:"block text-sm font-medium text-primary/80 mb-2",children:"Preço Máximo"}),e.jsx("input",{type:"number",id:"priceMax",name:"priceMax",value:o.priceMax,onChange:h,placeholder:"Ex: 1000000",min:"0",step:"1000",className:"w-full p-3 border border-secondary-dark/30 rounded-lg focus:ring-2 focus:ring-accent/30 focus:border-accent focus:outline-none transition-all font-sans text-sm"})]})]}),e.jsxs("div",{className:"flex justify-end mt-6",children:[e.jsx("button",{type:"button",onClick:T,className:"text-primary hover:text-accent mr-4 font-medium text-sm",children:"Limpar Filtros"}),e.jsx("button",{type:"submit",className:"bg-primary hover:bg-primary-dark text-white rounded-lg px-6 py-2 text-sm transition-all duration-300 shadow-md hover:shadow-lg font-medium",children:"Aplicar Filtros"})]})]})]})]}),e.jsx("div",{className:"absolute -z-10 w-64 h-64 bg-accent/5 rounded-full -top-10 -right-10 blur-3xl"}),e.jsx("div",{className:"absolute -z-10 w-64 h-64 bg-primary/5 rounded-full -bottom-10 -left-10 blur-3xl"})]})},Ce=()=>{const[b]=ae(),[s,o]=m.useState(null),[u,w]=m.useState(!0),[v,h]=m.useState(0),[M,C]=m.useState(null),[T,c]=m.useState(null);he();const x=b.get("id");m.useEffect(()=>{x&&j()},[x]);const j=async()=>{try{const{data:a,error:i}=await R.from("properties").select("*").eq("id",x).single();if(i)throw i;console.log("Dados do imóvel:",a),o(a)}catch(a){console.error("Erro ao carregar imóvel:",a),D.error("Falha ao carregar detalhes do imóvel")}finally{w(!1)}},g=m.useCallback(()=>{if(!s)return;const a=s.image?[s.image,...s.images||[]]:s.images||[];h(i=>i===0?a.length-1:i-1)},[s]),L=m.useCallback(()=>{if(!s)return;const a=s.image?[s.image,...s.images||[]]:s.images||[];h(i=>i===a.length-1?0:i+1)},[s]),r=a=>{C(a.targetTouches[0].clientX)},p=a=>{c(a.targetTouches[0].clientX)},f=()=>{if(!M||!T)return;const a=M-T,i=a>50,$=a<-50;i&&L(),$&&g(),C(null),c(null)};if(u)return e.jsx("div",{className:"container mx-auto px-4 py-12",children:"Carregando..."});if(!s)return e.jsxs("div",{className:"container mx-auto px-4 py-12 text-center",children:[e.jsx("h2",{className:"text-2xl font-medium mb-4",children:"Imóvel não encontrado"}),e.jsx(J,{to:"/properties",className:"text-gold hover:underline",children:"Voltar para todos os imóveis"})]});const t=s.image?[s.image,...s.images||[]]:s.images||[];console.log("Todas as imagens:",t);const d=a=>a.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});return e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(J,{to:"/properties",className:"inline-flex items-center text-gold hover:underline mb-6",children:[e.jsx(ve,{size:18,className:"mr-2"}),"Voltar para todos os imóveis"]}),e.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-medium mb-2",children:s.title}),e.jsxs("div",{className:"flex items-center text-primary bg-accent/10 px-3 py-1.5 rounded-full inline-block",children:[e.jsx("div",{className:"bg-accent rounded-full p-1 mr-2 shadow-sm",children:e.jsx(B,{size:16,className:"text-white",strokeWidth:2.5})}),e.jsx("span",{className:"font-medium",children:s.location})]})]}),e.jsx("div",{className:"mt-4 md:mt-0",children:e.jsx("div",{className:"text-3xl font-serif text-accent font-bold",children:d(s.price)})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[e.jsxs("div",{className:"lg:col-span-2",children:[t.length>0?e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"relative overflow-hidden rounded-lg",onTouchStart:r,onTouchMove:p,onTouchEnd:f,children:[e.jsx(ue,{mode:"wait",children:e.jsx(S.img,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},src:t[v],alt:`${s.title} - Vista ${v+1}`,className:"w-full h-[300px] sm:h-[400px] md:h-[500px] object-cover"},v)}),t.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:g,className:"absolute left-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors","aria-label":"Imagem anterior",children:e.jsx(ye,{size:24})}),e.jsx("button",{onClick:L,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 bg-black/50 text-white rounded-full hover:bg-black/70 transition-colors","aria-label":"Próxima imagem",children:e.jsx(pe,{size:24})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 flex space-x-2",children:t.map((a,i)=>e.jsx("button",{onClick:()=>h(i),className:`w-2 h-2 rounded-full transition-colors ${i===v?"bg-white":"bg-white/50"}`,"aria-label":`Ir para imagem ${i+1}`},i))})]})]}),t.length>1&&e.jsx("div",{className:"mt-4 grid grid-cols-4 sm:grid-cols-6 md:grid-cols-8 gap-2",children:t.map((a,i)=>e.jsx("button",{onClick:()=>h(i),className:`w-full aspect-square overflow-hidden rounded-sm transition-all ${i===v?"ring-2 ring-gold":"hover:opacity-80"}`,children:e.jsx("img",{src:a,alt:`Miniatura ${i+1}`,className:"w-full h-full object-cover"})},i))})]}):e.jsx("div",{className:"bg-neutral-100 h-[300px] sm:h-[400px] md:h-[500px] flex items-center justify-center rounded-lg",children:e.jsx("div",{className:"text-neutral-400",children:"Nenhuma imagem disponível"})}),e.jsxs("div",{className:"p-6 bg-white shadow-sm mt-8",children:[e.jsx("h2",{className:"text-2xl font-medium mb-4",children:"Detalhes do Imóvel"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 mb-8",children:[e.jsxs("div",{className:"flex flex-col items-center p-4 bg-neutral-50",children:[e.jsx(ee,{size:24,className:"text-gold mb-2"}),e.jsx("span",{className:"text-lg font-medium",children:s.bedrooms}),e.jsx("span",{className:"text-neutral-600 text-sm",children:"Quartos"})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 bg-neutral-50",children:[e.jsx(se,{size:24,className:"text-gold mb-2"}),e.jsx("span",{className:"text-lg font-medium",children:s.bathrooms}),e.jsx("span",{className:"text-neutral-600 text-sm",children:"Banheiros"})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 bg-neutral-50",children:[e.jsx(ke,{size:24,className:"text-gold mb-2"}),e.jsx("span",{className:"text-lg font-medium",children:s.size}),e.jsx("span",{className:"text-neutral-600 text-sm",children:"m²"})]}),e.jsxs("div",{className:"flex flex-col items-center p-4 bg-neutral-50",children:[e.jsx(je,{size:24,className:"text-gold mb-2"}),e.jsx("span",{className:"text-lg font-medium",children:(s==null?void 0:s.property_type)||"Não informado"}),e.jsx("span",{className:"text-neutral-600 text-sm",children:"Tipo de Imóvel"})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-medium mb-2",children:"Descrição"}),e.jsx("p",{className:"text-neutral-600 leading-relaxed whitespace-pre-line",children:s.fullDescription||s.description}),s.address&&e.jsx("div",{className:"mt-4 p-3 bg-primary/5 rounded-lg border border-primary/10",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(B,{className:"text-accent mt-0.5 mr-2 flex-shrink-0",size:18}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-primary text-sm",children:"Endereço completo:"}),e.jsx("p",{className:"text-primary/80 mt-1",children:s.address})]})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-xl font-medium mb-4 flex items-center",children:[e.jsx(Y,{className:"mr-2 text-accent",size:20}),"Localização"]}),e.jsx("div",{className:"bg-primary/5 p-4 rounded-lg mb-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(B,{className:"text-accent mt-1 mr-3 flex-shrink-0",size:20}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-primary",children:s.location})})]})}),e.jsx("div",{className:"bg-secondary border border-primary/10 rounded-lg h-48 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Y,{className:"mx-auto text-primary/40 mb-2",size:32}),e.jsx("p",{className:"text-primary/60 text-sm",children:"Mapa disponível em breve"})]})})]}),s.features&&s.features.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-medium mb-2",children:"Características"}),e.jsx("ul",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-2",children:s.features.map((a,i)=>e.jsxs("li",{className:"flex items-center text-neutral-600",children:[e.jsx("div",{className:"h-2 w-2 bg-gold rounded-full mr-2"}),a]},i))})]})]})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-white p-6 shadow-sm sticky top-24",children:[e.jsx("h3",{className:"text-xl font-medium mb-4",children:"Interessado neste imóvel?"}),e.jsx("p",{className:"text-neutral-600 mb-6",children:"Preencha o formulário abaixo e entrarei em contato em breve."}),e.jsx(be,{propertySuggestion:s.title})]})})]})]})},Pe=()=>{const[b]=ae();ge();const[s,o]=m.useState([]),[u,w]=m.useState([]),[v,h]=m.useState(!0),[M,C]=m.useState({search:"",priceMin:"",priceMax:"",bedrooms:"",bathrooms:"",propertyType:""}),T=b.get("id"),c=b.get("search"),x=b.get("type");m.useEffect(()=>{j();const r={search:c||"",priceMin:"",priceMax:"",bedrooms:"",bathrooms:"",propertyType:x||""};C(r),(c||x)&&setTimeout(()=>{g(r)},500)},[c,x]);const j=async()=>{try{const{data:r,error:p}=await R.from("properties").select("*").eq("status","available").order("created_at",{ascending:!1});if(p)throw p;const f=(r==null?void 0:r.filter(t=>t&&t.id&&t.title&&t.price&&t.location))||[];console.log("Propriedades carregadas:",f),console.log("Localização das propriedades:",f.map(t=>t.location)),o(f),w(f)}catch(r){console.error("Erro ao carregar imóveis:",r),D.error("Falha ao carregar imóveis")}finally{h(!1)}};if(T)return e.jsx(Ce,{});const g=async r=>{try{console.log("Filtros recebidos:",r);const{data:p,error:f}=await R.from("properties").select("*").eq("status","available").order("created_at",{ascending:!1});if(f)throw console.error("Erro ao buscar propriedades:",f),f;let t=p||[];if(r.search&&t.length>0){const d=r.search.toLowerCase().trim(),a=d.split(/\s+/).filter(l=>l.length>0);console.log("Termos de busca:",a);const i=["r ","r. ","rua ","av ","av. ","avenida ","travessa ","alameda ","estrada "],$=i.some(l=>d.includes(l)),te=/\b(r|rua|av|avenida|travessa|alameda|estrada)\b\.?\s+([a-zçáàâãéèêíïóôõöúüñ]+)/i,I=d.match(te);if(console.log("Detectada busca por rua:",$,I),t=t.filter(l=>{var W,U,O,K;const y=((W=l.title)==null?void 0:W.toLowerCase())||"",N=((U=l.location)==null?void 0:U.toLowerCase())||"",F=((O=l.description)==null?void 0:O.toLowerCase())||"",q=((K=l.property_type)==null?void 0:K.toLowerCase())||"",_=l.features?Array.isArray(l.features)?l.features.join(" ").toLowerCase():String(l.features).toLowerCase():"",V=l.amenities?Array.isArray(l.amenities)?l.amenities.join(" ").toLowerCase():String(l.amenities).toLowerCase():"",H=`${y} ${N} ${F} ${q} ${_} ${V}`,z=N.split(/,\s*|\s+-\s*|\s+/).map(n=>n.trim()).filter(n=>n.length>0);if($&&I&&I.length>1){const n=I[2].toLowerCase();if(z.some(P=>i.some(E=>P.startsWith(E)||z.indexOf(P)>0&&z[z.indexOf(P)-1].match(/^(r|rua|av|avenida|travessa|alameda|estrada)\.?$/i))&&P.includes(n)))return!0}return a.every(n=>{const Q=y.includes(n),P=N.includes(n),X=F.includes(n),E=q.includes(n),re=_.includes(n),ie=V.includes(n),le=z.some(A=>A.includes(n)||A.length>3&&n.length>3&&A.includes(n.substring(0,3))),ne=H.includes(n),Z=/^\d+$/.test(n),oe=Z&&N.match(new RegExp(`\\b${n}\\b`)),ce=n.length<=3;return Q||P||X||E||re||ie||le||ne||Z&&oe||ce&&H.includes(n)})}),t.length===0&&a.length>0){console.log("Tentando busca flexível...");let l=p.filter(y=>`${y.title||""} ${y.location||""} ${y.description||""} ${y.property_type||""}`.toLowerCase().includes(a[0]));if(l.length===0&&a[0].length>3){const y=a[0].substring(0,3);l=p.filter(N=>`${N.title||""} ${N.location||""} ${N.description||""}`.toLowerCase().includes(y))}l.length>0&&(t=l)}}if(r.propertyType&&t.length>0&&(t=t.filter(d=>{var a;return d.property_type&&d.property_type.toLowerCase()===((a=r.propertyType)==null?void 0:a.toLowerCase())})),r.priceMin&&t.length>0){const d=parseFloat(r.priceMin);t=t.filter(a=>a.price&&a.price>=d)}if(r.priceMax&&t.length>0){const d=parseFloat(r.priceMax);t=t.filter(a=>a.price&&a.price<=d)}if(r.bedrooms&&t.length>0){const d=parseInt(r.bedrooms);t=t.filter(a=>a.bedrooms&&a.bedrooms>=d)}if(r.bathrooms&&t.length>0){const d=parseInt(r.bathrooms);t=t.filter(a=>a.bathrooms&&a.bathrooms>=d)}console.log("Propriedades filtradas:",t),w(t)}catch(p){console.error("Erro detalhado ao filtrar imóveis:",p),D.error("Falha ao filtrar imóveis. Por favor, tente novamente.")}},L=()=>{g({search:"",priceMin:"",priceMax:"",bedrooms:"",bathrooms:"",propertyType:""})};return e.jsxs("div",{children:[e.jsxs("section",{className:"pt-32 pb-20 bg-gradient-to-br from-primary via-primary-dark to-primary relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-accent/10 rounded-full blur-3xl opacity-70"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-80 h-80 bg-white/10 rounded-full blur-3xl"}),e.jsx("div",{className:"container mx-auto px-4 relative z-10",children:e.jsxs(S.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},className:"max-w-3xl text-white",children:[e.jsx("div",{className:"inline-block mb-3 bg-accent/80 backdrop-blur-sm px-4 py-1.5 rounded-full",children:e.jsx("span",{className:"text-sm font-display font-medium tracking-wide uppercase",children:"Nossos Imóveis"})}),e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-display font-bold mb-6 leading-tight text-white",children:["Encontre seu ",e.jsx("br",{}),e.jsxs("span",{className:"text-accent font-serif italic relative",children:["Imóvel Perfeito",e.jsx("span",{className:"absolute -bottom-2 left-0 h-1 w-full bg-accent/50 rounded-full"})]})]}),e.jsx("p",{className:"text-white/90 text-lg max-w-2xl font-light leading-relaxed",children:"Navegue por nossa seleção exclusiva de imóveis de alto padrão. Use os filtros para refinar sua busca e encontrar o imóvel ideal para você e sua família."})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 100",className:"fill-secondary",children:e.jsx("path",{d:"M0,32L60,37.3C120,43,240,53,360,53.3C480,53,600,43,720,48C840,53,960,75,1080,80C1200,85,1320,75,1380,69.3L1440,64L1440,100L1380,100C1320,100,1200,100,1080,100C960,100,840,100,720,100C600,100,480,100,360,100C240,100,120,100,60,100L0,100Z"})})})]}),e.jsx("section",{className:"py-16 bg-secondary",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(Me,{onFilterChange:g,initialFilters:M}),v?e.jsx("div",{className:"flex justify-center items-center py-20",children:e.jsx("div",{className:"loader"})}):u.length===0?e.jsxs(S.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.5},className:"bg-white rounded-xl shadow-md p-12 text-center my-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-secondary rounded-full mb-6",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"w-8 h-8 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),e.jsx("h3",{className:"text-xl font-display font-semibold text-primary mb-3",children:"Nenhum imóvel encontrado"}),e.jsx("p",{className:"text-primary/70 mb-6",children:"Tente ajustar seus filtros para ver mais resultados"}),e.jsxs("button",{onClick:L,className:"inline-flex items-center px-5 py-2 bg-accent/10 hover:bg-accent/20 text-accent rounded-lg transition-colors",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Limpar Filtros"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-8 bg-white p-4 rounded-lg shadow-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"bg-accent/10 text-accent rounded-full w-10 h-10 flex items-center justify-center mr-3",children:e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z"})})}),e.jsx("div",{children:e.jsxs("p",{className:"text-primary font-medium",children:["Mostrando ",e.jsx("span",{className:"text-accent font-semibold",children:u.length})," ",u.length===1?"imóvel":"imóveis"]})})]}),e.jsx("div",{className:"hidden md:block",children:e.jsxs("select",{className:"bg-secondary border border-secondary-dark/20 text-primary rounded-md px-3 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-accent",onChange:()=>{},children:[e.jsx("option",{value:"newest",children:"Mais recentes"}),e.jsx("option",{value:"price_asc",children:"Menor preço"}),e.jsx("option",{value:"price_desc",children:"Maior preço"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:u.map((r,p)=>e.jsx(S.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.5,delay:p*.1},children:e.jsx(fe,{property:r})},r.id))})]})]})})]})};export{Pe as default};
